---
title: 初めてのC言語プログラミング
date: '2012-05-01T01:00:00'
hero: vc-first-13.png
status: 'published'
---

# 本章の概要

- **最初のプログラム**： プログラムの作り方
- **printf 関数とエスケープシーケンス**： 様々な文字列の出力方法
- **コンパイルとリンク**： 動くプログラムを作り出す
- **デバッグと良くあるミス**： プログラムを修正する

# 最初のプログラム

コンピュータのプログラム業界で、最初に書くプログラムといえば、“Hello, World!”という文字列を画面に表示する、と相場が決まっています。まずはこれを表示してみましょう。

## プロジェクトの作成法

プログラムを記述するために使用するプログラム（卵が先か鶏が先かみたいな話ですが）はいくつかあるのですが、ゲーム制作などで広くつかわれているのが **Visual Studio** という開発環境です。VisualStudio は様々な開発言語に対応しているのですが、私たちは **Visual C++** という言語を選択しています。VisualC++は、中規模以上のゲームを制作する場合、ほとんどの開発現場が採用する言語ですので、これから覚えていって損をすることはないはずです。

VisualStudio を使って C 言語のプログラムを制作するには、決まった手順を踏んでいく必要があります。まずはこれを体が覚えるまで繰り返していきます。これについては『VisualC++2010 の使い方』で詳しく解説していますので参照してください。

プロジェクトが作成でき、プログラムコードが書き込める状態になったでしょうか？　初回ですのでゆっくりやっていきますから、わからないことがあればすぐに周りのみんなに訊くか、講師を呼んでください。

## 最初のプログラム

```cpp
/* hello.c */ // (a)

#include <stdio.h> // (b)

int main() // (c)
{
  printf( "Hello, World!\n" ); // (d)(e)(f)
  return 0;
}
```

### プログラムの流れ: flow

プログラムは特に指定がなければ**上から下へと順番に実行**されていきます。ソースコードも上から下に書いていきます。

### 大文字/小文字、全角/半角、の区別

ソースコード上では、**大文字と小文字は区別されます**。INCLude や MAIN と書いた場合、それはもとの意味と違うものとして認識されますので注意してください。同じように**全角と半角も区別**され、コメントまたは表示用文字列以外の部分での全角文字の使用は基本的に禁止されています。

### a.コメント: comment

`/* */` で括ってある部分はコメントと呼ばれるもので、出来上がったプログラムには一切関係せず、**ソースコードを記述する際の覚え書きとして利用されます**。コメントを多く書くことで、後で見返したときにすぐに思い出せるようになったり、他人に見せるときに説明が楽になったりします。普段からコメントを書く習慣を身につけておくことは、プログラミングを職業とする人間にとって必須の事項といえます。

コメントには `/* */` で括るほかに、`//` を行頭に打つ方法もあります。この方法の場合、// の打ってある一行がコメントとして有効です。

### b.プリプロセッサディレクティブ: preprocessor directive

`#include <stdio.h>` は、コードの下で利用している `printf( )` を使うために必要な一文です。include は**「含みこむ」といった意味**があります。# が先頭についた文をプリプロセッサディレクティブ:Preprocessor Directive と言いますが、詳細は次回以降に説明します。

### c.エントリポイント: entry point

`main( )` は、**ここからプログラムが開始する**という部分であり、このカッコ内に記載された命令が、上から順に実行されていきます。main( ) 関数のことを一般にエントリポイント: Entry point と呼んだりします。

### d.命令文: statement、セミコロン: ;

main( ) の中には、プログラムで行いたい命令をひとつひとつ記述していきます。命令の一文を 文: Statement と呼びます。各命令文の最後にはセミコロン「;」を打ち、これでひとつの命令を区切ります。

**セミコロンがなければ文はいつまでも終わっていない扱いになります**。改行の下にも命令文が続いていることになります。

### e.インデント: indent

main( ) の中の命令は、他より少し右にずれています。これはインデント: indent と呼ばれるもので、日本語では字下げと呼びます。できるプログラマはインデントを施すことで、**どこからどこまでがひとつのブロックかを明示します。**

### f.関数: function

printf( ) は関数と呼ばれるもので、**行いたい処理の一部を、別に記載しておいたソースコードやライブラリに任せることができます**。printf( ) は与えられた文字列を表示する関数ですが、これを自前で作成することは大変なことですので、あらかじめ誰かに作っておいてもらい、利用するスタイルをとります。

皆さんも今後、自分が作成したいろいろな処理を関数としてまとめ、それをまた別途利用することが多くあると思います。自作関数がたくさんできると、それだけで自分が頑張っていることが目に見えて分かると思います。

# printf 関数とエスケープシーケンス

printf( ) には、文字列のほかに特殊な制御文字を与えることもでき、いろいろな処理を行うことができます。代表的なものをまとめます：

- `\n`: 改行
- `\t`: タブ
- `\\`: 『\』を文章で使いたいとき
- `\"`: 『"』を文章で使いたいとき

# コンパイルとリンク

プログラムコードを作成したら、いよいよ動かせるプログラムを作り出します。前章で説明した、ソースコードからリンクまでの流れが、ここで実演されます：

1. メニューバーより「**ビルド**」→「**ソリューションのビルド**」を選び、コードのコンパイルおよびリンクを開始する。（または Ctrl+Shift+B）正常に終了すれば、画面下の“出力”欄に『エラー 0』、と表示される。コードに問題があれば、『エラー 2』などが表示される。
1. エラー 0 の場合は、実行ファイルが出来上がっているので、実行する。メニューバーより「**デバッグ**」→「**デバッグなしで開始**」を選ぶ（または Ctrl+F5）
1. 黒いコンソールウィンドウが出力され、目的の結果が得られれば終了

# デバッグと良くあるミス

## デバッグ

『エラー: 2 』などと表示された場合は、書いたコードにミスがあります。**ミスを取り除く作業をデバッグ: Debug と呼び**、プログラミングの中で最も重要な作業の一つです。

Visual Studio では、コードエラーを簡単に取り除ける機能として、“出力”欄にエラー文を出力してくれる機能と、その文を**ダブルクリックすることでエラー箇所のコードを示してくれる**機能がありますので、ぜひ活用してください。

## 良くあるミス

初めてのプログラムはミスして当たり前ですので、気にする必要はありません。重要なのは「同じ過ちを 2 度犯さないようする」ことです。もしコンパイルエラーを起こしてしまった場合は、まずは下記の良くあるミスの一覧をチェックしてみてください：

- **かっこの閉じ忘れ**はありませんか？
- **セミコロンを打ち忘れ**ていませんか？
- **大文字/小文字**、**全角/半角**といったミスはありませんか？
- 文頭や文末に**全角のスペース**が紛れ込んでいませんか？
- プロジェクトの作成時に、間違えて Win32 コンソールアプリケーション以外を選びませんでしたか？

## "デキる" プログラマになるには

プログラムができる人間は、概ね『他人が見ても納得できるソースコード』を記述する能力があります。ソースコードを見せただけでプログラムを理解してもらうためには、以下の作業がとても大切です。簡単にできて、差がつくポイントです！

- **インデント**を揃えましょう
- **コメント**を打ちましょう
